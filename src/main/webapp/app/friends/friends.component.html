<div class="friends-root">
  <h1>Friends</h1>

  <!-- List friend requests -->
  <div *ngIf="friendRequests && friendRequests.length > 0">
    <h2>Friend Requests</h2>
    <table class="table table-striped" aria-describedby="page-heading">
      <thead>
        <th scope="col">
          <span>From</span>
        </th>
        <th scope="col">
          <span>Created</span>
        </th>
      </thead>
      <tbody>
        <tr *ngFor="let friendRequest of friendRequests">
          <td>{{ friendRequest.initiatingAppUser?.internalUser?.login }}</td>
          <td>{{ friendRequest.createdAt?.toString() }}</td>

          <td>
            <div>
              <button type="submit" (click)="accept(friendRequest.id)">
                <fa-icon icon="check"></fa-icon>
              </button>
              <button type="submit" (click)="reject(friendRequest.id)">
                <fa-icon icon="xmark"></fa-icon>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- View all visible users -->
  <div *ngIf="users && users.length > 0">
    <h2>Users</h2>
    <div *ngFor="let user of users">
      <div class="userCard">
        <img [src]="user?.avatarURL" />
        {{ user.internalUser?.login }}
        <button type="submit" (click)="sendFriendRequest(user.id)">
          <fa-icon icon="plus"></fa-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- List friends -->
  <div *ngIf="friends && friends.length > 0">
    <h2>My Friends</h2>
    <table class="table table-striped" aria-describedby="page-heading">
      <tbody>
        <tr *ngFor="let friend of friends">
          <div class="friendCard">
            <td>
              <img [src]="friend.friendAppUser?.avatarURL" />
              <p>{{ friend.friendAppUser?.internalUser?.login }}</p>
            </td>
            <td>{{ friend?.createdAt?.toString() }}</td>
            <td>
              <div>
                <button type="submit" (click)="delete(friend)">
                  <fa-icon icon="xmark"></fa-icon>
                </button>
              </div>
            </td>
          </div>
        </tr>
      </tbody>
    </table>
  </div>
</div>
